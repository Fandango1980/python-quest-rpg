<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Python Quest - Word de Held van Pythonia</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #fff;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Intro Screen */
        #intro-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            animation: fadeIn 1s ease-in;
        }
        
        .intro-content {
            max-width: 800px;
            padding: 40px;
            text-align: center;
            animation: slideUp 1s ease-out;
        }
        
        .intro-content h1 {
            font-size: 4em;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(255,215,0,0.5);
            animation: glow 2s ease-in-out infinite;
        }
        
        .intro-story {
            font-size: 1.3em;
            line-height: 1.8;
            margin: 30px 0;
            text-align: left;
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid rgba(255,215,0,0.3);
        }
        
        .intro-story p {
            margin-bottom: 20px;
        }
        
        .start-btn {
            padding: 20px 50px;
            font-size: 1.5em;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 50px;
            color: white;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 10px 30px rgba(245,87,108,0.4);
            transition: all 0.3s ease;
            margin-top: 30px;
        }
        
        .start-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(245,87,108,0.6);
        }
        
        /* Tutorial Overlay */
        #tutorial-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 999;
        }
        
        .tutorial-box {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 40px;
            border-radius: 20px;
            max-width: 600px;
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
        }
        
        .tutorial-box h2 {
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        
        .tutorial-box p {
            font-size: 1.2em;
            line-height: 1.6;
            margin-bottom: 30px;
        }
        
        .tutorial-code {
            background: #1e1e1e;
            color: #0f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
            margin: 20px 0;
            text-align: left;
        }
        
        .next-btn {
            padding: 15px 40px;
            font-size: 1.2em;
            background: #fff;
            color: #667eea;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .next-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255,255,255,0.3);
        }
        
        /* Game Container */
        .game-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 20px;
            display: none;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
        }
        
        header h1 {
            font-size: 3em;
            text-shadow: 0 0 20px rgba(255,215,0,0.5);
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            color: #ffd700;
        }
        
        .main-content {
            display: grid;
            grid-template-columns: 300px 1fr 300px;
            gap: 20px;
        }
        
        .panel {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255,255,255,0.2);
            margin-bottom: 20px;
        }
        
        h2 {
            color: #ffd700;
            margin-bottom: 15px;
            border-bottom: 2px solid rgba(255,215,0,0.3);
            padding-bottom: 10px;
            font-size: 1.3em;
        }
        
        .stat-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            font-size: 1.1em;
        }
        
        .stat-item:last-child { border-bottom: none; }
        
        .progress-bar {
            width: 100%;
            height: 25px;
            background: rgba(0,0,0,0.3);
            border-radius: 15px;
            overflow: hidden;
            margin-top: 10px;
            border: 2px solid rgba(255,215,0,0.3);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #f093fb, #f5576c);
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 10px rgba(245,87,108,0.5);
        }
        
        .skill-badge {
            display: inline-block;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            margin: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .story-text {
            line-height: 1.8;
            font-size: 1.1em;
            color: #e0e0e0;
        }
        
        .challenge-box {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            padding: 20px;
            border-radius: 10px;
            font-weight: bold;
            margin-bottom: 20px;
            font-size: 1.1em;
            border: 2px solid rgba(255,255,255,0.3);
            box-shadow: 0 5px 15px rgba(245,87,108,0.3);
        }
        
        #code-input {
            width: 100%;
            min-height: 180px;
            padding: 20px;
            border: 2px solid rgba(255,215,0,0.3);
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            background: rgba(0,0,0,0.5);
            color: #0f0;
            resize: vertical;
        }
        
        #code-input:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255,215,0,0.3);
        }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        
        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #f093fb, #f5576c);
            color: white;
            flex: 1;
            box-shadow: 0 5px 15px rgba(245,87,108,0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(245,87,108,0.5);
        }
        
        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 2px solid rgba(255,255,255,0.3);
        }
        
        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .btn-next-lesson {
            background: linear-gradient(135deg, #00d2ff, #3a7bd5);
            color: white;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            font-weight: bold;
            margin-top: 15px;
            width: 100%;
            box-shadow: 0 5px 15px rgba(58,123,213,0.3);
            transition: all 0.3s ease;
        }

        .btn-next-lesson:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(58,123,213,0.5);
        }
        
        #output {
            background: rgba(0,0,0,0.7);
            color: #0f0;
            padding: 20px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            min-height: 120px;
            white-space: pre-wrap;
            margin-top: 15px;
            border: 2px solid rgba(0,255,0,0.3);
            font-size: 1.05em;
        }
        
        .lesson-item {
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            cursor: pointer;
            background: rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
            border: 2px solid transparent;
        }
        
        .lesson-item:hover:not(.locked) {
            background: rgba(255,255,255,0.2);
            transform: translateX(5px);
            border-color: rgba(255,215,0,0.5);
        }
        
        .lesson-item.active {
            background: linear-gradient(135deg, #667eea, #764ba2);
            font-weight: bold;
            border-color: #ffd700;
            box-shadow: 0 5px 15px rgba(102,126,234,0.4);
        }
        
        .lesson-item.locked {
            opacity: 0.4;
            cursor: not-allowed;
        }
        
        .lesson-item.completed {
            background: rgba(0,255,0,0.2);
            border-color: rgba(0,255,0,0.3);
        }

        .lesson-item.unlocked {
            animation: pulse 1s ease-in-out 3;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); box-shadow: 0 0 20px rgba(255,215,0,0.6); }
        }
        
        .success { color: #00ff00; font-weight: bold; text-shadow: 0 0 10px #00ff00; }
        .error { color: #ff4444; font-weight: bold; text-shadow: 0 0 10px #ff4444; }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        @keyframes glow {
            0%, 100% { text-shadow: 0 0 20px rgba(255,215,0,0.5); }
            50% { text-shadow: 0 0 40px rgba(255,215,0,0.8), 0 0 60px rgba(255,215,0,0.6); }
        }
        
        @media (max-width: 1200px) {
            .main-content { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Intro Screen -->
    <div id="intro-screen">
        <div class="intro-content">
            <h1>üêç Python Quest</h1>
            <div class="intro-story">
                <p><strong>üìñ Het Verhaal van Pythonia</strong></p>
                <p>In het mystieke land van <strong>Pythonia</strong> leefden de mensen eeuwenlang in vrede. Maar op een dag verschenen er vreemde monsters uit het Digitale Bos - bugs, errors en crashes die het land bedreigden.</p>
                <p>Jij bent <strong>de Uitverkorene</strong>, een jonge held die de oude kunst van <strong>Code Magie</strong> moet leren om je dorp te beschermen.</p>
                <p>De wijze tovenaar <strong>Pythonicus</strong> zal je stap voor stap leren hoe je de krachtige Python spreukformules moet gebruiken om de monsters te verslaan.</p>
                <p><strong>‚öîÔ∏è Jouw missie:</strong> Leer de kunst van programmeren en word de grootste Code Krijger van Pythonia!</p>
            </div>
            <button class="start-btn" onclick="startGame()">üéÆ Begin je Avontuur!</button>
        </div>
    </div>

    <!-- Tutorial Overlay -->
    <div id="tutorial-overlay">
        <div class="tutorial-box">
            <h2 id="tutorial-title">üéì Les 1: De Print Spreuk</h2>
            <p id="tutorial-text">Welkom, jonge held! Ik ben Pythonicus, je mentor. De eerste spreuk die je moet leren is de <strong>print()</strong> spreuk. Hiermee kun je berichten tonen en de monsters verzwakken!</p>
            <div class="tutorial-code" id="tutorial-code">print("Hallo Wereld!")</div>
            <p id="tutorial-instruction">üëÜ Dit is hoe je de print spreuk gebruikt. Typ tekst tussen aanhalingstekens binnen de haakjes.</p>
            <button class="next-btn" onclick="nextTutorial()">Volgende ‚Üí</button>
        </div>
    </div>

    <!-- Game Container -->
    <div class="game-container">
        <header>
            <h1>üêç Python Quest</h1>
            <p class="subtitle">‚öîÔ∏è Bescherm Pythonia met de Kracht van Code!</p>
        </header>

        <div class="main-content">
            <!-- Left Panel -->
            <div>
                <div class="panel">
                    <h2>üßô‚Äç‚ôÇÔ∏è Jouw Held</h2>
                    <div class="stat-item"><span>üë§ Naam:</span><span>Code Krijger</span></div>
                    <div class="stat-item"><span>‚≠ê Level:</span><span id="level">1</span></div>
                    <div class="stat-item"><span>‚ù§Ô∏è HP:</span><span id="hp">100/100</span></div>
                    <div class="stat-item"><span>‚ú® XP:</span><span id="xp">0/100</span></div>
                    <div class="progress-bar"><div id="xp-bar" class="progress-fill"></div></div>
                </div>
                
                <div class="panel">
                    <h2>üëæ Vijand</h2>
                    <div class="stat-item"><span>Naam:</span><span id="enemy-name">-</span></div>
                    <div class="stat-item"><span>üíÄ HP:</span><span id="enemy-hp">-</span></div>
                    <div class="stat-item"><span>üéØ Aanval:</span><span id="attack-count">0/3</span></div>
                </div>
                
                <div class="panel">
                    <h2>üéØ Geleerde Spreuken</h2>
                    <div id="skills"></div>
                </div>
            </div>

            <!-- Center Panel -->
            <div>
                <div class="panel">
                    <h2>üìñ Het Verhaal</h2>
                    <div class="story-text" id="story"></div>
                </div>
                
                <div class="panel">
                    <h2>‚öîÔ∏è Jouw Uitdaging</h2>
                    <div class="challenge-box" id="challenge"></div>
                    
                    <h2>üíª Schrijf je Code Spreuk:</h2>
                    <textarea id="code-input" placeholder="# Typ hier je Python code...
# Bijvoorbeeld: print('Hallo Pythonia!')"></textarea>
                    <div class="button-group">
                        <button class="btn btn-primary" onclick="runCode()">‚ñ∂Ô∏è Voer Spreuk Uit!</button>
                        <button class="btn btn-secondary" onclick="showHint()">üí° Vraag Hulp</button>
                    </div>
                    <div id="output"></div>
                    <div id="next-lesson-container"></div>
                </div>
            </div>

            <!-- Right Panel -->
            <div>
                <div class="panel">
                    <h2>üìö Jouw Lessen</h2>
                    <div id="lessons"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let game = {
            player: { level: 1, hp: 100, maxHp: 100, xp: 0, xpNext: 100, skills: [] },
            currentLesson: 1,
            enemy: null,
            tutorialStep: 0,
            completedLessons: [],
            maxUnlockedLesson: 1,
            currentAttack: 0,
            usedChallenges: []
        };

        const lessons = {
            1: {
                title: 'üéØ Les 1: De Print Spreuk',
                story: 'üßô‚Äç‚ôÇÔ∏è <strong>Pythonicus spreekt:</strong><br><br>"Welkom, jonge held! Voor je staat de <strong>Syntax Bug</strong>, een van de zwakste monsters. Perfect om mee te oefenen!<br><br>De <strong>print()</strong> spreuk is de basis van alle code magie. Hiermee kun je berichten tonen en monsters aanvallen!<br><br>üìù <strong>Hoe werkt het?</strong><br>‚Ä¢ Typ: <code>print()</code><br>‚Ä¢ Zet je bericht tussen aanhalingstekens: <code>"je tekst"</code><br>‚Ä¢ Plaats het tussen de haakjes: <code>print("je tekst")</code><br><br>Probeer het nu!"',
                challenges: [
                    {
                        text: 'üìú Gebruik de print() spreuk om "Hallo Pythonia!" te roepen!',
                        hint: 'print("Hallo Pythonia!")',
                        check: (code) => {
                            const normalized = code.toLowerCase().replace(/\s+/g, '');
                            return normalized.includes('print') && 
                                   (normalized.includes('"hallopythonia!"') || normalized.includes("'hallopythonia!'"));
                        }
                    },
                    {
                        text: 'üìú Print nu "Ik ben een Code Krijger!" om verder aan te vallen!',
                        hint: 'print("Ik ben een Code Krijger!")',
                        check: (code) => {
                            const normalized = code.toLowerCase().replace(/\s+/g, '');
                            return normalized.includes('print') && normalized.includes('codekrij');
                        }
                    },
                    {
                        text: 'üìú Laatste aanval! Print "Syntax Bug verslagen!" voor de finale klap!',
                        hint: 'print("Syntax Bug verslagen!")',
                        check: (code) => {
                            const normalized = code.toLowerCase().replace(/\s+/g, '');
                            return normalized.includes('print') && (normalized.includes('syntaxbug') || normalized.includes('verslagen'));
                        }
                    }
                ],
                enemy: { name: 'Syntax Bug üêõ', hp: 90, maxHp: 90 },
                xp: 50,
                skill: 'print()'
            },
            2: {
                title: 'üì¶ Les 2: Variabelen - Magische Dozen',
                story: 'üßô‚Äç‚ôÇÔ∏è <strong>Pythonicus spreekt:</strong><br><br>"Uitstekend werk! Nu verschijnt de <strong>Memory Leak</strong>! Om deze te verslaan moet je leren over <strong>variabelen</strong>.<br><br>Variabelen zijn als magische dozen waar je informatie in kunt bewaren.<br><br>üìù <strong>Hoe werkt het?</strong><br>‚Ä¢ Kies een naam voor je doos: <code>naam</code><br>‚Ä¢ Gebruik het = teken: <code>naam =</code><br>‚Ä¢ Geef het een waarde: <code>naam = "Held"</code><br>‚Ä¢ Print de variabele: <code>print(naam)</code><br><br>‚ö†Ô∏è <strong>Belangrijk:</strong> Je print nu de variabele ZONDER aanhalingstekens!<br>Dus: <code>print(naam)</code> en NIET <code>print("naam")</code>"',
                challenges: [
                    {
                        text: 'üìú Maak een variabele "naam" met jouw naam erin, en print deze!',
                        hint: 'naam = "Jouw Naam"\nprint(naam)',
                        check: (code) => {
                            const cleanCode = code.split('\n').map(l => l.trim()).filter(l => l && !l.startsWith('#')).join('\n');
                            const hasVariableAssignment = /naam\s*=\s*['"]/i.test(cleanCode);
                            const hasPrintVariable = /print\s*\(\s*naam\s*\)/i.test(cleanCode);
                            return hasVariableAssignment && hasPrintVariable;
                        }
                    },
                    {
                        text: 'üìú Maak nu een variabele "wapen" met "zwaard" erin, en print deze!',
                        hint: 'wapen = "zwaard"\nprint(wapen)',
                        check: (code) => {
                            const cleanCode = code.split('\n').map(l => l.trim()).filter(l => l && !l.startsWith('#')).join('\n');
                            return /wapen\s*=\s*['"]/i.test(cleanCode) && /print\s*\(\s*wapen\s*\)/i.test(cleanCode);
                        }
                    },
                    {
                        text: 'üìú Laatste slag! Maak variabele "kracht" met waarde "100" en print deze!',
                        hint: 'kracht = "100"\nprint(kracht)',
                        check: (code) => {
                            const cleanCode = code.split('\n').map(l => l.trim()).filter(l => l && !l.startsWith('#')).join('\n');
                            return /kracht\s*=\s*/i.test(cleanCode) && /print\s*\(\s*kracht\s*\)/i.test(cleanCode);
                        }
                    }
                ],
                enemy: { name: 'Memory Leak üíæ', hp: 90, maxHp: 90 },
                xp: 75,
                skill: 'variabelen'
            },
            3: {
                title: 'üîÄ Les 3: If Statements - Beslissingen',
                story: 'üßô‚Äç‚ôÇÔ∏è <strong>Pythonicus spreekt:</strong><br><br>"De <strong>Logic Error</strong> daagt je uit! Deze vijand kan alleen verslagen worden met slimme beslissingen.<br><br>Met <strong>if statements</strong> kan je code verschillende dingen doen op basis van voorwaarden.<br><br>üìù <strong>Hoe werkt het?</strong><br>‚Ä¢ Begin met <code>if</code><br>‚Ä¢ Schrijf een voorwaarde: <code>if 10 > 5:</code><br>‚Ä¢ Let op de dubbele punt!<br>‚Ä¢ Spring in (4 spaties) en schrijf wat er moet gebeuren<br><br>Voorbeeld:<br><code>if 10 > 5:<br>&nbsp;&nbsp;&nbsp;&nbsp;print("Waar!")</code>"',
                challenges: [
                    {
                        text: 'üìú Schrijf een if statement die checkt of 15 > 10, en print "Aanval!"',
                        hint: 'if 15 > 10:\n    print("Aanval!")',
                        check: (code) => code.includes('if') && code.includes('15') && code.includes('10') && code.includes('>') && code.includes('print')
                    },
                    {
                        text: 'üìú Check nu of 20 > 5, en print "Sterk!" als dat waar is!',
                        hint: 'if 20 > 5:\n    print("Sterk!")',
                        check: (code) => code.includes('if') && code.includes('20') && code.includes('5') && code.includes('>') && code.includes('print')
                    },
                    {
                        text: 'üìú Finale! Check of 100 > 50, en print "Overwinning!"',
                        hint: 'if 100 > 50:\n    print("Overwinning!")',
                        check: (code) => code.includes('if') && code.includes('100') && code.includes('50') && code.includes('>') && code.includes('print')
                    }
                ],
                enemy: { name: 'Logic Error ‚ö†Ô∏è', hp: 90, maxHp: 90 },
                xp: 100,
                skill: 'if/else'
            },
            4: {
                title: 'üîÅ Les 4: Loops - Herhaling is Kracht',
                story: 'üßô‚Äç‚ôÇÔ∏è <strong>Pythonicus spreekt:</strong><br><br>"Het <strong>Infinite Loop Monster</strong> is verschenen! Ironisch genoeg versla je hem met... loops!<br><br><strong>For loops</strong> laten je code meerdere keren herhalen zonder alles opnieuw te typen.<br><br>üìù <strong>Hoe werkt het?</strong><br>‚Ä¢ Begin met <code>for</code><br>‚Ä¢ Kies een variabele naam: <code>for i</code><br>‚Ä¢ Gebruik <code>in range()</code>: <code>for i in range(5):</code><br>‚Ä¢ Spring in en schrijf wat herhaald moet worden<br><br>Voorbeeld:<br><code>for i in range(3):<br>&nbsp;&nbsp;&nbsp;&nbsp;print(i)</code><br>Dit print: 0, 1, 2"',
                challenges: [
                    {
                        text: 'üìú Gebruik een for loop om de getallen 1 tot 5 te printen!',
                        hint: 'for i in range(1, 6):\n    print(i)',
                        check: (code) => code.includes('for') && code.includes('range') && code.includes('print')
                    },
                    {
                        text: 'üìú Print nu de getallen 0 tot 3 met een loop!',
                        hint: 'for i in range(4):\n    print(i)',
                        check: (code) => code.includes('for') && code.includes('range') && code.includes('print')
                    },
                    {
                        text: 'üìú Laatste loop! Print de getallen 10 tot 15!',
                        hint: 'for i in range(10, 16):\n    print(i)',
                        check: (code) => code.includes('for') && code.includes('range') && code.includes('print')
                    }
                ],
                enemy: { name: 'Infinite Loop Monster ‚ôæÔ∏è', hp: 90, maxHp: 90 },
                xp: 125,
                skill: 'for/while loops'
            },
            5: {
                title: '‚ö° Les 5: Functies - Herbruikbare Spreuken',
                story: 'üßô‚Äç‚ôÇÔ∏è <strong>Pythonicus spreekt:</strong><br><br>"De machtige <strong>Recursion Dragon</strong>! Voor deze vijand heb je <strong>functies</strong> nodig.<br><br>Functies zijn herbruikbare blokken code - als spreuken die je kunt oproepen wanneer je wilt!<br><br>üìù <strong>Hoe werkt het?</strong><br>‚Ä¢ Begin met <code>def</code> (define)<br>‚Ä¢ Geef je functie een naam: <code>def aanval():</code><br>‚Ä¢ Spring in en schrijf de code<br>‚Ä¢ Roep de functie aan door de naam te typen: <code>aanval()</code><br><br>Voorbeeld:<br><code>def begroet():<br>&nbsp;&nbsp;&nbsp;&nbsp;print("Hallo!")<br><br>begroet()</code>"',
                challenges: [
                    {
                        text: 'üìú Maak een functie "aanval" die "Draak!" print, en roep deze aan!',
                        hint: 'def aanval():\n    print("Draak!")\n\naanval()',
                        check: (code) => {
                            const hasDefine = code.includes('def') && code.includes('aanval');
                            const hasCall = code.split('def')[1] && code.includes('aanval()');
                            return hasDefine && hasCall && code.includes('print');
                        }
                    },
                    {
                        text: 'üìú Maak functie "verdedig" die "Schild!" print, en roep aan!',
                        hint: 'def verdedig():\n    print("Schild!")\n\nverdedig()',
                        check: (code) => {
                            const hasDefine = code.includes('def') && code.includes('verdedig');
                            const hasCall = code.split('def')[1] && code.includes('verdedig()');
                            return hasDefine && hasCall && code.includes('print');
                        }
                    },
                    {
                        text: 'üìú Finale! Functie "overwin" die "Verslagen!" print!',
                        hint: 'def overwin():\n    print("Verslagen!")\n\noverwin()',
                        check: (code) => {
                            const hasDefine = code.includes('def') && code.includes('overwin');
                            const hasCall = code.split('def')[1] && code.includes('overwin()');
                            return hasDefine && hasCall && code.includes('print');
                        }
                    }
                ],
                enemy: { name: 'Recursion Dragon üêâ', hp: 90, maxHp: 90 },
                xp: 150,
                skill: 'functies'
            },
            6: {
                title: 'üìã Les 6: Lists - Verzamelingen',
                story: 'üßô‚Äç‚ôÇÔ∏è <strong>Pythonicus spreekt:</strong><br><br>"De laatste vijand: <strong>Index Error Beast</strong>! Versla hem met <strong>lists</strong>!<br><br>Lists zijn verzamelingen waar je meerdere waarden in kunt opslaan.<br><br>üìù <strong>Hoe werkt het?</strong><br>‚Ä¢ Gebruik vierkante haakjes: <code>[]</code><br>‚Ä¢ Scheid items met komma\'s: <code>["appel", "peer", "banaan"]</code><br>‚Ä¢ Bewaar in variabele: <code>fruit = ["appel", "peer"]</code><br>‚Ä¢ Pak item met index (begint bij 0): <code>fruit[0]</code> geeft "appel"<br><br>Voorbeeld:<br><code>kleuren = ["rood", "blauw"]<br>print(kleuren[0])</code>"',
                challenges: [
                    {
                        text: 'üìú Maak list "wapens" met 3 wapens, print het eerste wapen!',
                        hint: 'wapens = ["zwaard", "boog", "staf"]\nprint(wapens[0])',
                        check: (code) => {
                            const hasWapens = code.includes('wapens') && code.includes('[') && code.includes(']');
                            const hasPrint = code.includes('print') && code.includes('wapens[0]');
                            return hasWapens && hasPrint;
                        }
                    },
                    {
                        text: 'üìú Maak list "spreuken" met 3 spreuken, print de tweede!',
                        hint: 'spreuken = ["vuur", "ijs", "bliksem"]\nprint(spreuken[1])',
                        check: (code) => {
                            const hasSpreuken = code.includes('spreuken') && code.includes('[') && code.includes(']');
                            const hasPrint = code.includes('print') && code.includes('spreuken[1]');
                            return hasSpreuken && hasPrint;
                        }
                    },
                    {
                        text: 'üìú Finale! List "helden" met 3 namen, print de derde!',
                        hint: 'helden = ["Arthur", "Merlin", "Lancelot"]\nprint(helden[2])',
                        check: (code) => {
                            const hasHelden = code.includes('helden') && code.includes('[') && code.includes(']');
                            const hasPrint = code.includes('print') && code.includes('helden[2]');
                            return hasHelden && hasPrint;
                        }
                    }
                ],
                enemy: { name: 'Index Error Beast üëπ', hp: 90, maxHp: 90 },
                xp: 200,
                skill: 'lists'
            }
        };

        const tutorialSteps = [
            {
                title: 'üéì Les 1: De Print Spreuk',
                text: 'Welkom, jonge held! Ik ben Pythonicus, je mentor. De eerste spreuk die je moet leren is de <strong>print()</strong> spreuk. Hiermee kun je berichten tonen!',
                code: 'print("Hallo Wereld!")',
                instruction: 'üëÜ Dit is hoe je de print spreuk gebruikt. Typ tekst tussen aanhalingstekens binnen de haakjes.'
            },
            {
                title: 'üìù Hoe schrijf je code?',
                text: 'Kijk goed naar de structuur:<br><br>1Ô∏è‚É£ <strong>print</strong> - de naam van de spreuk<br>2Ô∏è‚É£ <strong>()</strong> - haakjes eromheen<br>3Ô∏è‚É£ <strong>"tekst"</strong> - je bericht tussen aanhalingstekens',
                code: 'print("Dit is mijn bericht!")',
                instruction: 'üí° Je kunt ook enkele aanhalingstekens gebruiken: print(\'Hallo!\')'
            },
            {
                title: '‚öîÔ∏è Tijd om te vechten!',
                text: 'Nu ga je je eerste monster verslaan! Typ de code <strong>exact</strong> zoals je het geleerd hebt in het code veld hieronder.',
                code: 'print("Hallo Pythonia!")',
                instruction: 'üéØ Typ dit in het code veld en klik op "Voer Spreuk Uit!" om de Syntax Bug aan te vallen!'
            }
        ];

        function startGame() {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('tutorial-overlay').style.display = 'flex';
        }

        function nextTutorial() {
            game.tutorialStep++;
            if (game.tutorialStep < tutorialSteps.length) {
                const step = tutorialSteps[game.tutorialStep];
                document.getElementById('tutorial-title').innerHTML = step.title;
                document.getElementById('tutorial-text').innerHTML = step.text;
                document.getElementById('tutorial-code').textContent = step.code;
                document.getElementById('tutorial-instruction').innerHTML = step.instruction;
            } else {
                document.getElementById('tutorial-overlay').style.display = 'none';
                document.querySelector('.game-container').style.display = 'block';
                loadLesson(1);
            }
        }

        function loadLesson(num) {
            const lesson = lessons[num];
            if (!lesson) return;
            
            game.currentLesson = num;
            game.enemy = { ...lesson.enemy };
            game.currentAttack = 0;
            game.usedChallenges = [];
            
            document.getElementById('story').innerHTML = lesson.story;
            document.getElementById('challenge').innerHTML = lesson.challenges[0].text;
            document.getElementById('enemy-name').textContent = lesson.enemy.name;
            document.getElementById('output').innerHTML = '';
            document.getElementById('code-input').value = '';
            document.getElementById('next-lesson-container').innerHTML = '';
            
            renderLessons();
            updateUI();
        }

        function renderLessons() {
            const lessonsDiv = document.getElementById('lessons');
            lessonsDiv.innerHTML = '';
            
            Object.keys(lessons).forEach(key => {
                const num = parseInt(key);
                const lesson = lessons[num];
                const div = document.createElement('div');
                div.className = 'lesson-item';
                
                if (num === game.currentLesson) {
                    div.classList.add('active');
                } else if (game.completedLessons.includes(num)) {
                    div.classList.add('completed');
                } else if (num > game.maxUnlockedLesson) {
                    div.classList.add('locked');
                }
                
                const icon = game.completedLessons.includes(num) ? '‚úÖ' : `${num}Ô∏è‚É£`;
                div.innerHTML = `<span>${icon}</span><span>${lesson.title.split(':')[1] || lesson.title}</span>`;
                
                if (num <= game.maxUnlockedLesson) {
                    div.onclick = () => loadLesson(num);
                }
                
                lessonsDiv.appendChild(div);
            });
        }

        function runCode() {
            const code = document.getElementById('code-input').value;
            const lesson = lessons[game.currentLesson];
            const output = document.getElementById('output');
            
            if (!code.trim()) {
                output.innerHTML = '<span class="error">‚ùå Je hebt nog geen code geschreven! Typ eerst je spreuk.</span>';
                return;
            }
            
            const currentChallenge = lesson.challenges[game.currentAttack];
            
            if (currentChallenge.check(code)) {
                output.innerHTML = '<span class="success">‚úÖ Spreuk succesvol uitgevoerd!</span>\n\n';
                
                // Try to show actual output
                try {
                    const prints = code.match(/print\s*\(['"](.*?)['"]\)/g);
                    if (prints) {
                        prints.forEach(p => {
                            const match = p.match(/['"](.*?)['"]/);
                            if (match) {
                                output.innerHTML += 'üì§ Output: ' + match[1] + '\n';
                            }
                        });
                    }
                } catch(e) {}
                
                const damage = 30;
                game.enemy.hp -= damage;
                game.currentAttack++;
                
                output.innerHTML += `\n‚öîÔ∏è Je spreuk raakt! ${damage} schade aan ${game.enemy.name}!\n`;
                
                if (game.enemy.hp <= 0) {
                    output.innerHTML += `\nüéâ OVERWINNING! Je hebt ${game.enemy.name} verslagen!\n`;
                    output.innerHTML += `‚ú® +${lesson.xp} XP verdiend!\n`;
                    
                    gainXP(lesson.xp);
                    
                    if (!game.player.skills.includes(lesson.skill)) {
                        game.player.skills.push(lesson.skill);
                        output.innerHTML += `\nüéØ Nieuwe spreuk geleerd: ${lesson.skill}!\n`;
                        updateSkills();
                    }
                    
                    // Mark lesson as completed
                    if (!game.completedLessons.includes(game.currentLesson)) {
                        game.completedLessons.push(game.currentLesson);
                    }
                    
                    // Unlock next lesson
                    const nextLessonNum = game.currentLesson + 1;
                    if (lessons[nextLessonNum]) {
                        game.maxUnlockedLesson = Math.max(game.maxUnlockedLesson, nextLessonNum);
                        output.innerHTML += `\nüîì Les ${nextLessonNum} ontgrendeld!\n`;
                        
                        // Add button to go to next lesson
                        const nextBtn = document.createElement('button');
                        nextBtn.className = 'btn-next-lesson';
                        nextBtn.textContent = `‚û°Ô∏è Ga naar Les ${nextLessonNum}: ${lessons[nextLessonNum].title.split(':')[1]}`;
                        nextBtn.onclick = () => loadLesson(nextLessonNum);
                        document.getElementById('next-lesson-container').innerHTML = '';
                        document.getElementById('next-lesson-container').appendChild(nextBtn);
                        
                        renderLessons();
                        
                        // Highlight the newly unlocked lesson
                        setTimeout(() => {
                            const lessonItems = document.querySelectorAll('.lesson-item');
                            if (lessonItems[nextLessonNum - 1]) {
                                lessonItems[nextLessonNum - 1].classList.add('unlocked');
                            }
                        }, 100);
                    } else {
                        output.innerHTML += '\n\nüèÜ GEFELICITEERD! Je hebt alle lessen voltooid en bent nu een echte Code Krijger van Pythonia! üéä';
                    }
                } else {
                    // Next challenge
                    if (game.currentAttack < lesson.challenges.length) {
                        output.innerHTML += `\nüí™ Goed gedaan! Het monster is verzwakt maar nog niet verslagen!\n`;
                        output.innerHTML += `\nüéØ Nieuwe uitdaging geladen...\n`;
                        document.getElementById('challenge').innerHTML = lesson.challenges[game.currentAttack].text;
                        document.getElementById('code-input').value = '';
                    }
                }
            } else {
                output.innerHTML = '<span class="error">‚ùå Je spreuk werkt niet goed!</span>\n\n';
                output.innerHTML += 'üí≠ Controleer:\n';
                
                // Specific feedback per lesson
                if (game.currentLesson === 2) {
                    output.innerHTML += '‚Ä¢ Heb je een variabele gemaakt met =?\n';
                    output.innerHTML += '‚Ä¢ Print je de variabele zonder aanhalingstekens?\n';
                } else {
                    output.innerHTML += '‚Ä¢ Heb je de juiste spreuk gebruikt?\n';
                    output.innerHTML += '‚Ä¢ Staan de haakjes en aanhalingstekens goed?\n';
                }
                output.innerHTML += '‚Ä¢ Klik op "Vraag Hulp" voor een voorbeeld!';
            }
            
            updateUI();
        }

        function showHint() {
            const lesson = lessons[game.currentLesson];
            const currentChallenge = lesson.challenges[game.currentAttack];
            document.getElementById('output').innerHTML = `üí° Tip van Pythonicus:\n\n${currentChallenge.hint}\n\nüëÜ Probeer dit!`;
        }

        function gainXP(xp) {
            game.player.xp += xp;
            
            while (game.player.xp >= game.player.xpNext) {
                game.player.level++;
                game.player.xp -= game.player.xpNext;
                game.player.xpNext = Math.floor(game.player.xpNext * 1.5);
                game.player.maxHp += 20;
                game.player.hp = game.player.maxHp;
                
                const output = document.getElementById('output');
                output.innerHTML += `\n\nüéä LEVEL UP! Je bent nu level ${game.player.level}!\n`;
                output.innerHTML += `‚ù§Ô∏è Max HP verhoogd naar ${game.player.maxHp}!\n`;
            }
        }

        function updateSkills() {
            const skillsDiv = document.getElementById('skills');
            skillsDiv.innerHTML = '';
            
            if (game.player.skills.length === 0) {
                skillsDiv.innerHTML = '<p style="opacity:0.6;">Nog geen spreuken geleerd...</p>';
                return;
            }
            
            game.player.skills.forEach(skill => {
                const badge = document.createElement('span');
                badge.className = 'skill-badge';
                badge.textContent = skill;
                skillsDiv.appendChild(badge);
            });
        }

        function updateUI() {
            document.getElementById('level').textContent = game.player.level;
            document.getElementById('hp').textContent = `${game.player.hp}/${game.player.maxHp}`;
            document.getElementById('xp').textContent = `${game.player.xp}/${game.player.xpNext}`;
            document.getElementById('xp-bar').style.width = `${(game.player.xp / game.player.xpNext) * 100}%`;
            
            if (game.enemy) {
                document.getElementById('enemy-name').textContent = game.enemy.name;
                document.getElementById('enemy-hp').textContent = `${Math.max(0, game.enemy.hp)}/${game.enemy.maxHp}`;
                
                const lesson = lessons[game.currentLesson];
                document.getElementById('attack-count').textContent = `${game.currentAttack}/${lesson.challenges.length}`;
            }
        }

        // Initialize
        updateSkills();
    </script>
</body>
</html>